{% extends '/admin/dashboard_base.html' %}

{% block title %} Dashboard {% endblock %}
{% block nav_title %} Dashboard {% endblock %}

{% block content %}
<div class="main">
    <div class="container mt-2">
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <div class="section1">
            <div class="box1 box">
                <div class="d-flex align-items-center" style="margin-bottom: 0%;">
                    <img src="static/img/users.png" alt="Users" style="height: 40px; margin-right: 10px;">
                    <div class="ml-3 flex-grow-1">
                        <div class="money_display">{{ everything[0] }} </div>
                        <h3 class="money_type_title">Users</h3>
                    </div>
                </div>
            </div>
            <div class="box1 box">
                <div class="d-flex align-items-center" style="margin-bottom: 0%;">
                    <img src="static/img/influencer.svg" alt="Influencers" style="height: 40px; margin-right: 10px;">
                    <div class="ml-3 flex-grow-1">
                        <div class="money_display">{{ everything[1] }} </div>
                        <h3 class="money_type_title">Influencers</h3>
                    </div>
                </div>
            </div>
            <div class="box1 box">
                <div class="d-flex align-items-center" style="margin-bottom: 0%;">
                    <img src="static/img/sponsor.svg" alt="Sponsors" style="height: 40px; margin-right: 10px;">
                    <div class="ml-3 flex-grow-1">
                        <div class="money_display">{{ everything[2] }} </div>
                        <h3 class="money_type_title">Sponsors</h3>
                    </div>
                </div>
            </div>
            <div class="box1 box">
                <div class="d-flex align-items-center" style="margin-bottom: 0%;">
                    <img src="static/img/campaign.svg" alt="Campaigns" style="height: 40px; margin-right: 10px;">
                    <div class="ml-3 flex-grow-1">
                        <div class="money_display">{{ everything[3] }} </div>
                        <h3 class="money_type_title">Campaigns</h3>
                    </div>
                </div>
            </div>
            <div class="box1 box">
                <div class="d-flex align-items-center" style="margin-bottom: 0%;">
                    <img src="static/img/ad-request.svg" alt="Ad Requests" style="height: 40px; margin-right: 10px;">
                    <div class="ml-3 flex-grow-1">
                        <div class="money_display">{{ everything[4] }} </div>
                        <h3 class="money_type_title">Ad Requests</h3>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card mb-3" style="width: 100%; height: 30rem;">
            <div class="d-flex justify-content-around align-items-center" style="height: 100%;">
                <div style="width: 50.5%; height: 100%;">
                    <canvas id="everythingChart" style="width: 100%; height: 100%;"></canvas>
                </div>
                <div style="width: 35.5%; height: 90%;">
                    <canvas id="sponsorInfluencerChart" style="width: 100%; height: 100%;"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var chartData2 = JSON.parse('{{ sponsor_influencer_ratio_chart | tojson | safe }}');
    var counts = JSON.parse('{{ everything | tojson | safe }}');
</script>
{% endblock %}
